jQuery(document).ready(function(){MpcSpin.initSpin()});(function(i,b){var k={};var h=false,c="",g="",e="",n,l;k.initSpin=function(){savedjobj={};c=jQuery("#email");g=jQuery("#api_key");e=jQuery("#textBox");n=jQuery("#spanConvert");e.val(parent.MpcEditor.submitSnip("getselection"));parent.MpcEditor.doAjax64("../ajax.php","yXA749X0a",true,{},function(p){rj=jQuery.parseJSON(p);c.val(rj.email_address);g.val(rj.api_key);if(rj.confidence_level!="medium"){jQuery("#idM").toggleClass("fsel",false);if(rj.confidence_level=="low"){jQuery("#idL").toggleClass("fsel",true)}else{jQuery("#idH").toggleClass("fsel",true)}}if(rj.nested_spintax=="true"){jQuery("#idNo0").toggleClass("fsel",false);jQuery("#idYes0").toggleClass("fsel",true)}if(rj.auto_sentences=="true"){jQuery("#idNo1").toggleClass("fsel",false);jQuery("#idYes1").toggleClass("fsel",true)}if(rj.auto_paragraphs=="true"){jQuery("#idNo2").toggleClass("fsel",false);jQuery("#idYes2").toggleClass("fsel",true)}if(rj.auto_new_paragraphs=="true"){jQuery("#idNo3").toggleClass("fsel",false);jQuery("#idYes3").toggleClass("fsel",true)}if(rj.auto_sentence_trees=="true"){jQuery("#idNo4").toggleClass("fsel",false);jQuery("#idYes4").toggleClass("fsel",true)}if(rj.auto_protected_terms=="true"){jQuery("#idNo6").toggleClass("fsel",false);jQuery("#idYes6").toggleClass("fsel",true)}jQuery("#taProtect").val(rj.protected_terms);a()})};k.startOver=function(){e.val(parent.MpcEditor.submitSnip("getselection"));h=false;n.toggleClass("delete",false);n.html("Convert to Spintax")};k.acceptClick=function(){parent.MpcEditor.putSnipAPI(e.val());k.byebye()};k.sendToSpin=function(p){d();if(h){h=false;e.val(l);n.toggleClass("delete",false);n.html("Convert to Spintax");a();return}o(function(){savedjobj.action=p;savedjobj.text=e.val();parent.MpcEditor.doAjax64("../ajax.php","y84e4eX9A",true,savedjobj,function(q){rj=jQuery.parseJSON(q);if(rj.status=="OK"){h=true;l=savedjobj.text;n.toggleClass("delete",true);n.html("UnConvert Spintax");e.val(rj.response);m(rj.api_requests_available)}else{f(rj.response)}a()})})};k.checkQuota=function(){d();o(function(){savedjobj.action="api_quota";parent.MpcEditor.doAjax64("../ajax.php","y84e4eX9A",true,savedjobj,function(p){rj=jQuery.parseJSON(p);if(rj.status=="OK"){m(rj.api_requests_available)}else{f(rj.response)}a()})})};function f(q){var p=jQuery("#diastat");p.html(q);p.css("visibility","visible")}k.hideStatus=function(){jQuery("#diastat").css("visibility","hidden")};function m(p){jQuery("#quota_msg").html(p+" API requests available")}k.setDefaults=function(){jQuery(".doff").toggleClass("fsel",false);jQuery(".don").toggleClass("fsel",true)};k.clearList=function(){var p=jQuery("#taProtect");p.val("");p.focus()};function o(w){var r="medium";if(jQuery("#idL").hasClass("fsel")){r="low"}if(jQuery("#idH").hasClass("fsel")){r="high"}var u=x1=x2=x3=x4=x6="false";if(jQuery("#idYes0").hasClass("fsel")){u="true"}if(jQuery("#idYes1").hasClass("fsel")){x1="true"}if(jQuery("#idYes2").hasClass("fsel")){x2="true"}if(jQuery("#idYes3").hasClass("fsel")){x3="true"}if(jQuery("#idYes4").hasClass("fsel")){x4="true"}if(jQuery("#idYes6").hasClass("fsel")){x6="true"}var v=jQuery("#taProtect").val();v=v.trim();if(v!=""){var t=v.split("\n");var q=t.length;var p;v=t[0].trim();for(p=1;p<q;p++){s=t[p].trim();if(s==""){continue}v+="\n"+s}}savedjobj={email_address:c.val().trim(),api_key:g.val().trim(),confidence_level:r,nested_spintax:u,auto_sentences:x1,auto_paragraphs:x2,auto_new_paragraphs:x3,auto_sentence_trees:x4,auto_protected_terms:x6,protected_terms:v};jstr=JSON.stringify(savedjobj);parent.MpcEditor.doAjax64("../ajax.php","y9C64aX66",true,{parm_ajax:jstr},w)}k.lmhClicked=function(q){var p=new Array(false,false,false);p[q]=true;jQuery("#idL").toggleClass("fsel",p[0]);jQuery("#idM").toggleClass("fsel",p[1]);jQuery("#idH").toggleClass("fsel",p[2])};k.ynClicked=function(p){var r=jQuery("#idNo"+p);var q=jQuery("#idYes"+p);if(r.hasClass("sb-dis")||q.hasClass("sb-dis")){return}if(r.hasClass("selok")&&q.hasClass("selok")){if(r.hasClass("fsel")){r.toggleClass("fsel",false);q.toggleClass("fsel",true)}else{q.toggleClass("fsel",false);r.toggleClass("fsel",true)}}};k.togOver=function(p){j=jQuery("#"+p);if(!j.hasClass("selok")){return}if(j.hasClass("sb-dis")){return}j.toggleClass("toghover",true)};k.togOut=function(p){jQuery("#"+p).toggleClass("toghover",false)};k.cbShowhideClick=function(){if(jQuery("#cbShowhide").prop("checked")){var p="text";var q="black"}else{var p="password";var q="#c4c4c4"}c.prop("type",p);c.css("color",q);g.prop("type",p);g.css("color",q)};function a(){jQuery(".allbtns").prop("disabled",false);jQuery(".pinbox").css("opacity","1.0");jQuery("#ttlbusy").toggleClass("busycss",false)}function d(){jQuery("#ttlbusy").toggleClass("busycss",true);jQuery(".allbtns").prop("disabled",true);jQuery(".pinbox").css("opacity","0.3")}k.byebye=function(){parent.MpcEditor.EX_cancel()};i.MpcSpin=k})(window);