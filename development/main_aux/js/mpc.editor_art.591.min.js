jQuery(document).ready(function(){MpcArt.initArt()});(function(n,d){var a={};var k=false,e="",i="",g="",m="",o="",c=[];a.initArt=function(){savedjobj={};e=jQuery("#email");i=jQuery("#api_key");g=jQuery("#textBox");objLogin=jQuery("#bnLogin");m="";max_queries=0;parent.MpcEditor.doAjax64("../ajax.php","y4094bX3f",true,{},function(s){rj=jQuery.parseJSON(s);e.val(rj.username);i.val(rj.password);if(rj.superspun1=="1"){jQuery("#idNo0").toggleClass("fsel",false);jQuery("#idYes0").toggleClass("fsel",true)}if(rj.superspun2=="1"){jQuery("#idNo1").toggleClass("fsel",false);jQuery("#idYes1").toggleClass("fsel",true)}if(rj.lsireplacement=="1"){jQuery("#idNo2").toggleClass("fsel",false);jQuery("#idYes2").toggleClass("fsel",true)}if(rj.paracount=="1"){jQuery("#idNo3").toggleClass("fsel",false);jQuery("#idYes3").toggleClass("fsel",true)}if(rj.spintogether=="1"){jQuery("#idNo4").toggleClass("fsel",false);jQuery("#idYes4").toggleClass("fsel",true);l(false)}jQuery("#acnt").val(rj.count);jQuery("#wcnt").val(rj.wordcount);o=rj.category;b()})};a.acceptClick=function(){parent.MpcEditor.putSnipAPI(g.val());a.byebye()};a.sendToArt=function(){f();q(function(){savedjobj.action="buildArticle";savedjobj.session=m;parent.MpcEditor.doAjax64("../ajax.php","yx3X4fX90",true,savedjobj,function(s){rj=jQuery.parseJSON(s);if(rj.success=="true"){g.val(rj.output);a.checkQuota()}else{h(rj.output);b()}})})};a.checkQuota=function(){f();q(function(){savedjobj.action="apiQueries";savedjobj.session=m;parent.MpcEditor.doAjax64("../ajax.php","yx3X4fX90",true,savedjobj,function(s){rj=jQuery.parseJSON(s);if(rj.success=="true"){rem=max_queries-rj.output;p(rem)}else{h(rj.output)}b()})})};function r(){savedjobj.action="categories";savedjobj.session=m;parent.MpcEditor.doAjax64("../ajax.php","yx3X4fX90",true,savedjobj,function(t){rj=jQuery.parseJSON(t);if(rj.success=="true"){var s=$("select[id='cats']");jQuery(rj.output).each(function(w,u){s.append(jQuery("<option>",{value:u,html:u}))});jQuery("#cats").val(o)}else{h(rj.output)}a.checkQuota()})}a.doLogin=function(){f();savedjobj.action="authenticate";savedjobj.username=e.val();savedjobj.password=i.val();parent.MpcEditor.doAjax64("../ajax.php","yx3X4fX90",true,savedjobj,function(s){rj=jQuery.parseJSON(s);if(rj.success=="false"){h(rj.error);b()}else{m=rj.session;savedjobj.session=rj.session;savedjobj.action="apiMaxQueries";parent.MpcEditor.doAjax64("../ajax.php","yx3X4fX90",true,savedjobj,function(t){rj=jQuery.parseJSON(t);if(rj.success=="true"){max_queries=rj.output}else{max_queries=999}r()})}})};function p(s){jQuery("#quota_msg").html(s+" API requests available")}function h(t){var s=jQuery("#diastat");s.html(t);s.css("visibility","visible")}a.hideStatus=function(){jQuery("#diastat").css("visibility","hidden")};a.setDefaults=function(){jQuery(".doff").toggleClass("fsel",false);jQuery(".don").toggleClass("fsel",true);jQuery("#acnt").val("2");jQuery("#wcnt").val("300");l(true)};function q(u){var s=x1=x2=x3=x4="0";if(jQuery("#idYes0").hasClass("fsel")){s="1"}if(jQuery("#idYes1").hasClass("fsel")){x1="1"}if(jQuery("#idYes2").hasClass("fsel")){x2="1"}if(jQuery("#idYes3").hasClass("fsel")){x3="1"}if(jQuery("#idYes4").hasClass("fsel")){x4="1"}var t=s;if(x1==1){t=2}savedjobj={username:e.val().trim(),password:i.val().trim(),superspun:t,superspun1:s,superspun2:x1,lsireplacement:x2,paracount:x3,spintogether:x4,count:jQuery("#acnt").val(),wordcount:jQuery("#wcnt").val(),category:jQuery("#cats").val()};jstr=JSON.stringify(savedjobj);parent.MpcEditor.doAjax64("../ajax.php","yX944cXce",true,{parm_ajax:jstr},u)}a.lmhClicked=function(t){var s=new Array(false,false,false);s[t]=true;jQuery("#idL").toggleClass("fsel",s[0]);jQuery("#idM").toggleClass("fsel",s[1]);jQuery("#idH").toggleClass("fsel",s[2])};a.ynClicked=function(s){var u=jQuery("#idNo"+s);var t=jQuery("#idYes"+s);if(u.hasClass("sb-dis")||t.hasClass("sb-dis")){return}if(u.hasClass("selok")&&t.hasClass("selok")){if(u.hasClass("fsel")){u.toggleClass("fsel",false);t.toggleClass("fsel",true);if(s==4){l(false)}}else{t.toggleClass("fsel",false);u.toggleClass("fsel",true);if(s==4){l(true)}}}};function l(s){jQuery("#acntdiv").css("visibility",(s)?"hidden":"visible")}a.togOver=function(s){j=jQuery("#"+s);if(!j.hasClass("selok")){return}if(j.hasClass("sb-dis")){return}j.toggleClass("toghover",true)};a.togOut=function(s){jQuery("#"+s).toggleClass("toghover",false)};a.cbShowhideClick=function(){if(jQuery("#cbShowhide").prop("checked")){var s="text";var t="black"}else{var s="password";var t="#c4c4c4"}e.prop("type",s);e.css("color",t);i.prop("type",s);i.css("color",t)};function b(){if(m!=""){jQuery(".allbtns").prop("disabled",false);jQuery(".pinbox").css("opacity","1.0")}else{jQuery(".somebtns").prop("disabled",false);jQuery(".somepinbox").css("opacity","1.0")}jQuery("#ttlbusy").toggleClass("busycss",false)}function f(){jQuery("#ttlbusy").toggleClass("busycss",true);jQuery(".allbtns").prop("disabled",true);jQuery(".pinbox").css("opacity","0.3")}a.byebye=function(){parent.MpcEditor.EX_cancel()};n.MpcArt=a})(window);