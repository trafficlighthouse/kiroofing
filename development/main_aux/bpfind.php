<?php  $tbl = $_POST['tbl']; $val = $_POST['val']; $xAC063X21 = array('status'=>'ng', 'value'=>''); $xAC063X21['rand'] = mt_rand();  if($tbl == 'line') { $xAC063X21['status'] = 'ok'; $xAC063X21['value'] = $val; echo json_encode($xAC063X21); exit; }  $db = new SQLite3('bh.db');  if($tbl == 'src') { $xF0F1beXf = $db->querySingle("SELECT id FROM source WHERE path LIKE '%$val%'"); if($xF0F1beXf != '') getValue("SELECT id FROM page WHERE src=$xF0F1beXf"); }  else if($tbl == 'dest') { getValue("SELECT id FROM blueprint WHERE num=0 AND cv LIKE '%$val%'"); }  else if(preg_match('/^v(\d)$/', $tbl, $m) == 1) { getValue("SELECT id FROM blueprint WHERE num=$m[1] AND cv LIKE '%$val%'"); }  echo json_encode($xAC063X21); exit();    function getValue($qstr) { global $db, $xAC063X21;  $xF0F1beXf = $db->querySingle($qstr); $db->close(); $xAC063X21['value'] = $xF0F1beXf; if($xF0F1beXf != '') $xAC063X21['status'] = 'ok'; }